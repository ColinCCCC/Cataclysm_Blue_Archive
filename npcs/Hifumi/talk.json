[
    {
	    "type": "mutation",
        "id": "standby_Hifumi",
        "copy-from": "mutation_mark_Common",
        "name": {"str": "日富美待命中"},
        "description": "日富美待命中"
    },
    {
        "id": "TALK_Hifumi_recruit",
        "type": "talk_topic",
        "dynamic_line": "啊哈哈…我虽然还不成熟但请多多指教。(あはは…至らない私ですがよろしくお願いします。)",
        "responses": [
            {
                "text": "ᕕ(◠ڼ◠)ᕗ",
                "effect": [
                    "follow",
                    { "npc_set_talker": { "global_val": "Hifumi_id" } },
                    { "set_string_var": "补课部", "target_var": { "npc_val": "student_organization" } },
                    { "set_string_var": "★★★", "target_var": { "npc_val": "student_stars" } },
                    { "math": [ "npc_number_stars_cnt_student_stars", "=", "3" ] },
                    { "set_string_var": "Hifumi", "target_var": { "npc_val": "student_ename" } },
                    { "set_string_var": "有什么需要帮忙吗？", "target_var": { "npc_val": "student_topic" } }
                ],
                "topic": "TALK_DONE"
            }
        ]
    },
    {
        "id": [ "TALK_Kivotos_Students" ],
        "type": "talk_topic",
        "responses": [
            {
                "condition": { "npc_has_trait": "Mutation_Hifumi" },
                "text": "[6 Cost] 拜托了，佩洛洛大人!(召唤一个吸引怪物的诱饵并对周围3格内敌对目标造成伤害)",
                "trial": { "type": "CONDITION", "condition": { "math": [ "u_vitamin('vitamin_ba_cost')", ">=", "6" ] } },
                "success": {
                    "topic": "TALK_DONE",
                    "effect": [
                        { "math": [ "u_vitamin('vitamin_ba_cost')", "-=", "6" ] },
                        { "u_set_talker": { "global_val": "player_id" } },
                        "take_control",
                        { "set_string_var": "caster_spell_summon_Pello", "target_var": { "context_val": "student_spell_caster" } },
                        { "queue_eocs": "EOC_student_cast_spell", "time_in_future": 2 },
                        { "queue_eocs": "EOC_return_to_player", "time_in_future": 5 }
                    ]
                },
                "failure": { "topic": "TALK_NOEnoughCost" }
            }
        ]
    },
    {
        "type": "talk_topic",
        "id": [ "TALK_Arona_Recall" ],
        "responses": [
            {
                "text": "召回日富美",
                "condition": { "u_has_trait": "standby_Hifumi"},
                "effect": [
                    { "math": [ "Student_id", "=", "Hifumi_id" ] },
                    { "u_lose_trait": "standby_Hifumi" },
                    { "run_eocs": [  "EOC_Recall_Student" ] }
                ],
                "topic": "TALK_DONE"
            }
        ]
    }
]