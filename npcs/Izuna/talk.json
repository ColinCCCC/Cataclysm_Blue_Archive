[
    {
	    "type": "mutation",
        "id": "standby_Izuna",
        "copy-from": "mutation_mark_Common",
        "name": {"str": "伊树菜待命中"},
        "description": "伊树菜待命中"
    },
    {
        "id": "TALK_Izuna_recruit",
        "type": "talk_topic",
        "dynamic_line": "伊树菜参上！老师…不， 为了回应主公的呼唤，飞奔前来！忍忍！(イズナ、参上です！先生の……、いえ、主殿のお呼びを受けて、走って参りました～！にんにん！)",
        "responses": [
            {
                "text": "ᕕ(◠ڼ◠)ᕗ",
                "effect": [
                    "follow",
                    { "npc_learn_martial_art": "style_ninjutsu" },
                    { "npc_set_talker": { "global_val": "Izuna_id" } },
                    { "set_string_var": "忍术研究部", "target_var": { "npc_val": "student_organization" } },
                    { "set_string_var": "★★★", "target_var": { "npc_val": "student_stars" } },
                    { "math": [ "npc_number_stars_cnt_student_stars", "=", "3" ] },
                    { "set_string_var": "Izuna", "target_var": { "npc_val": "student_ename" } },
                    { "set_string_var": "是的，主公。忍忍。", "target_var": { "npc_val": "student_topic" } }
                ],
                "topic": "TALK_DONE"
            }
        ]
    },
    {
        "id": [ "TALK_Kivotos_Students" ],
        "type": "talk_topic",
        "responses": [
            {
                "condition": { "npc_has_trait": "Mutation_Izuna" },
                "text": "[3 Cost] 伊树菜忍法帖(伊树菜原地放下替身，并瞬移到指定地点，攻速增加)",
                "trial": { "type": "CONDITION", "condition": { "math": [ "u_vitamin('vitamin_ba_cost')", ">=", "3" ] } },
                "success": {
                    "topic": "TALK_DONE",
                    "effect": [
                        { "u_set_talker": { "global_val": "player_id" } },
                        "take_control",
                        { "math": [ "u_vitamin('vitamin_ba_cost')", "-=", "3" ] },
                        { "set_string_var": "caster_spell_summon_foxDoll", "target_var": { "context_val": "student_spell_caster" } },
                        { "queue_eocs": "EOC_student_cast_spell", "time_in_future": 3 },
                        { "queue_eocs": "EOC_return_to_player", "time_in_future": 5 }
                    ]
                },
                "failure": { "topic": "TALK_NOEnoughCost" }
            }
        ]
    },
    {
        "type": "talk_topic",
        "id": [ "TALK_Arona_Recall" ],
        "responses": [
            {
                "text": "召回伊树菜",
                "condition": { "u_has_trait": "standby_Izuna"},
                "effect": [
                    { "math": [ "Student_id", "=", "Izuna_id" ] },
                    { "u_lose_trait": "standby_Izuna" },
                    { "run_eocs": [  "EOC_Recall_Student" ] }
                ],
                "topic": "TALK_DONE"
            }
        ]
    }
]